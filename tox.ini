[flake8]
exclude = .git,__pycache,*/migrations/*,*/db/versions/*


[tox]
envlist = py{34,35}-{codestyle,nosetests}
ignore_errors=True


[testenv]
basepython=
    py34: python3.4
    py35: python3.5

commands=
    codestyle: pre-commit run --all-files
    nosetests: nosetests -w src/tests --tests=test_utils

deps=
    -rrequirements/test.txt
    http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip#md5=3df394d89300db95163f17c843ef49df

envdir=
    py34: {toxworkdir}/py34
    py35: {toxworkdir}/py35

setenv=
# Pass an environmental variable due to bug in tox
    BLUEBERRYPY_CONFIG={env:BLUEBERRYPY_CONFIG}
    NOSE_TESTCONFIG_AUTOLOAD_YAML=config/test/app.yml
